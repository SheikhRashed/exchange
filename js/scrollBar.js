!function(t,s,o){"use strict";var e="scrollBox",i={containerClass:"sb-container",contentClass:"sb-content",scrollbarContainerClass:"sb-scrollbar-container",scrollBarClass:"sb-scrollbar"};function n(s,o){this.element=s,this.settings=t.extend({},i,o),this._defaults=i,this._name=e,this.init()}t.extend(n.prototype,{init:function(){this.addScrollbar(),this.addEvents(),this.onResize()},addScrollbar:function(){t(this.element).addClass(this.settings.containerClass),this.wrapper=t("<div class='"+this.settings.contentClass+"' />"),this.wrapper.append(t(this.element).contents()),t(this.element).append(this.wrapper),this.scollbarContainer=t("<div class='"+this.settings.scrollbarContainerClass+"' />"),this.scrollBar=t("<div class='"+this.settings.scrollBarClass+"' />"),this.scollbarContainer.append(this.scrollBar),t(this.element).prepend(this.scollbarContainer)},addEvents:function(){this.wrapper.on("scroll."+e,t.proxy(this.onScroll,this)),t(s).on("resize."+e,t.proxy(this.onResize,this)),this.scrollBar.on("mousedown."+e,t.proxy(this.onMousedown,this)),this.scrollBar.on("touchstart."+e,t.proxy(this.onTouchstart,this))},onTouchstart:function(s){var i=this;s.preventDefault();var n=i.scrollBar[0].offsetTop;t(o).on("touchmove."+e,function(t){var o=t.originalEvent.touches[0].pageY-s.touches[0].pageY;i.scrollBar[0].style.top=Math.min(i.scollbarContainer[0].clientHeight-i.scrollBar[0].clientHeight,Math.max(0,n+o))+"px",i.wrapper[0].scrollTop=i.wrapper[0].scrollHeight*i.scrollBar[0].offsetTop/i.scollbarContainer[0].clientHeight}),t(o).on("touchend."+e,function(){t(o).off("touchmove."+e),t(o).off("touchend."+e)})},onMousedown:function(s){var i=this;s.preventDefault();var n=i.scrollBar[0].offsetTop;t(o).on("mousemove."+e,function(t){var o=t.pageY-s.pageY;i.scrollBar[0].style.top=Math.min(i.scollbarContainer[0].clientHeight-i.scrollBar[0].clientHeight,Math.max(0,n+o))+"px",i.wrapper[0].scrollTop=i.wrapper[0].scrollHeight*i.scrollBar[0].offsetTop/i.scollbarContainer[0].clientHeight}),t(o).on("mouseup."+e,function(){t(o).off("mousemove."+e),t(o).off("mouseup."+e)})},onResize:function(){this.wrapper.css("max-height",t(this.element).height());var s=this.wrapper[0].clientHeight;this.scrollBar.css("height",this.scollbarContainer[0].clientHeight*s/this.wrapper[0].scrollHeight+"px"),this.scollbarContainer[0].clientHeight<=this.scrollBar[0].clientHeight?this.scollbarContainer.addClass("sb-scrollbar-container-hide"):this.scollbarContainer.removeClass("sb-scrollbar-container-hide"),this.onScroll()},onScroll:function(){this.scrollBar.css("top",Math.min(this.scollbarContainer[0].clientHeight-this.scrollBar[0].clientHeight,this.scollbarContainer[0].clientHeight*this.wrapper[0].scrollTop/this.wrapper[0].scrollHeight)+"px")}}),t.fn[e]=function(s){return this.each(function(){t.data(this,"plugin_"+e)||t.data(this,"plugin_"+e,new n(this,s))})}}(jQuery,window,document);